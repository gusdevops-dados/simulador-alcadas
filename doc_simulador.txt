ğŸ“˜ DocumentaÃ§Ã£o TÃ©cnica â€” Simulador de PolÃ­ticas e AlÃ§adas
1. DescriÃ§Ã£o TÃ©cnica
O aplicativo foi desenvolvido em Python utilizando o framework Streamlit, com foco em permitir que analistas definam, testem e comparem diferentes polÃ­ticas de alÃ§ada aplicadas a reclamaÃ§Ãµes de clientes.
Principais pontos tÃ©cnicos:
Input de dados: Upload de planilhas CSV/XLSX com variÃ¡veis histÃ³ricas de clientes e uma coluna de referÃªncia financeira (vlr_contest) e de data (data_contest).
DetecÃ§Ã£o automÃ¡tica de tipos de variÃ¡veis:
NumÃ©ricas (thresholds, ranges).
Booleanas (ex.: bom pagador).
CategÃ³ricas (ex.: canal de atendimento).
Motor de Regras:
Regras organizadas em grupos com lÃ³gica interna (AND/OR).
AgregaÃ§Ã£o de grupos sob uma lÃ³gica superior (AND/OR).
AvaliaÃ§Ã£o linha a linha do dataset, gerando colunas auxiliares: aprovado e motivo_negativa.
MÃºltiplos cenÃ¡rios:
O usuÃ¡rio pode criar, duplicar, salvar (JSON) e carregar cenÃ¡rios.
Cada cenÃ¡rio Ã© processado sob demanda atravÃ©s do botÃ£o â€œGerar/Atualizar cenÃ¡rioâ€.
Indicadores principais:
PÃºblico total (N).
Pote total (R$).
Aprovados (N).
Taxa de aprovaÃ§Ã£o (%).
Perdas (valor aprovado) R$ e %.
Saving (valor negado) R$ e %.
AnualizaÃ§Ã£o:
Fator calculado com base no intervalo da coluna data_contest.
Aplica-se tanto a valores monetÃ¡rios quanto a contagens.
ExportaÃ§Ã£o:
Base analÃ­tica completa (CSV) por cenÃ¡rio, contendo colunas originais + aprovado + motivo_negativa.
Comparativo de cenÃ¡rios em CSV.
Bibliotecas principais:
pandas, numpy: manipulaÃ§Ã£o de dados.
streamlit: front-end interativo.
plotly.express: grÃ¡ficos dinÃ¢micos (barras de aprovaÃ§Ã£o/negaÃ§Ã£o, motivos).
matplotlib: compatibilidade para grÃ¡ficos adicionais.
json, io: salvar/carregar configuraÃ§Ãµes.


2. Fluxo TÃ©cnico do Aplicativo
flowchart TD
    A[Upload da base CSV/XLSX] --> B[DetecÃ§Ã£o de tipos de variÃ¡veis]
    B --> C[ConfiguraÃ§Ã£o de regras (UI por cenÃ¡rio)]
    C --> D[BotÃ£o "Gerar/Atualizar cenÃ¡rio"]
    D --> E[Motor de avaliaÃ§Ã£o linha a linha]
    E --> F[GeraÃ§Ã£o da base analÃ­tica: aprovado/negado + motivo]
    F --> G[CÃ¡lculo de indicadores brutos]
    G --> H[OpÃ§Ã£o: aplicar anualizaÃ§Ã£o (datas)]
    H --> I[ExibiÃ§Ã£o de KPIs por cenÃ¡rio]
    H --> J[VisualizaÃ§Ã£o grÃ¡fica: Aprovados vs Negados, Motivos]
    F --> K[ExportaÃ§Ã£o CSV base analÃ­tica]
    I --> L[ComparaÃ§Ã£o de cenÃ¡rios]
    L --> M[ExportaÃ§Ã£o CSV comparativo]
3. Guia de UtilizaÃ§Ã£o da Ferramenta
ğŸ“‚ Upload da Base
Clique em â€œSuba a base (CSV ou Excel)â€.
O arquivo deve conter ao menos:
Colunas de variÃ¡veis utilizadas nas regras.
vlr_contest: valor financeiro contestado.
data_contest: data da contestaÃ§Ã£o (para anualizaÃ§Ã£o).
âš™ï¸ ConfiguraÃ§Ã£o de CenÃ¡rios
Acesse a aba de cada cenÃ¡rio (ex.: CenÃ¡rio A).
Defina:
AgregaÃ§Ã£o entre grupos: se todos os grupos devem ser satisfeitos (AND) ou basta um (OR).
Regras dentro de cada grupo:
NumÃ©ricas â†’ â‰¥, â‰¤, ou intervalo.
Booleanas â†’ exigir True/False.
CategÃ³ricas â†’ valores permitidos.
Adicione, duplique ou remova cenÃ¡rios no sidebar.
Salve/importe configuraÃ§Ãµes em JSON.
â–¶ï¸ ExecuÃ§Ã£o
ApÃ³s definir regras, clique em â€œGerar/Atualizar cenÃ¡rioâ€.
O processamento pode levar mais tempo em bases grandes.
ğŸ“Š Resultados
Indicadores:
PÃºblico total (linhas da base).
Pote total (soma de vlr_contest).
Aprovados (N).
Taxa de aprovaÃ§Ã£o (%).
Perdas e Savings em R$ e %.
GrÃ¡ficos:
Aprovados vs Negados.
Motivos da negativa (quando Top Logic = AND).
ğŸ“ˆ AnualizaÃ§Ã£o
Ative o checkbox â€œAnualizar valores (R$ e contagens)â€.
O sistema calcula automaticamente o perÃ­odo coberto pela base (data_contest) e ajusta os indicadores para projeÃ§Ã£o anual.
Pode-se escolher como interpretar as datas (DD/MM/AAAA, MM/DD/AAAA, etc).
ğŸ“¤ ExportaÃ§Ã£o
Em cada cenÃ¡rio:
Base analÃ­tica (CSV) â†’ todas as linhas com aprovado e motivo_negativa.
Na aba ğŸ“Š Comparar:
Comparativo de cenÃ¡rios (KPIs) â†’ CSV.
AgregaÃ§Ãµes adicionais sobre variÃ¡veis numÃ©ricas, por populaÃ§Ã£o (Aprovados/Negados/Todos).
ğŸ‘‰ Assim vocÃª tem: descriÃ§Ã£o tÃ©cnica para devs, fluxo tÃ©cnico para arquitetura e guia de uso para stakeholders/usuÃ¡rios.
Quer que eu monte esse material em PDF formatado (com seÃ§Ãµes, tÃ­tulos e fluxograma embutido) para vocÃª jÃ¡ distribuir internamente?